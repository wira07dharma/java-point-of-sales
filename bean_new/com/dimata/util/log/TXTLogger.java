/* Generated by Together */

package com.dimata.util.log;

import java.io.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;

public class TXTLogger
{
    public static final int CRITICALERR = 1;
    public static final int ERROR = 2;
    public static final int WARNING = 3;
    public static final int INFO = 4;

    private OutputStream stream;
    private PrintStream print;
    private SimpleDateFormat sdf;
    private String logFile;


    public TXTLogger()
    {
    }

    public TXTLogger(String fileName)
    {
        /*
        this.sdf = new SimpleDateFormat("MMM dd yyyyy hh:mm:ss");
        this.logFile = fileName;
        this.initLog();
        */
    }


    public TXTLogger(String fileName, String dateFormat)
    {
        /*
        this.sdf = new SimpleDateFormat(dateFormat);
        this.logFile = fileName;
        this.initLog();
        */
    }


    public void write(int level, String msg)
    {
       try{
        if(level > 0 && level < 5) {
            String s = sdf.format(new Date());
            switch(level) {
                case 1: print.println(s + " CRITICALERROR::" + msg); break;
                case 2: print.println(s + " ERROR::"  + msg); break;
                case 3: print.println(s + " WARNING::"  + msg); break;
                case 4: print.println(s + " INFO::"  + msg); break;
            }
            this.close();
        }
       } catch (Exception e) {}
    }               


    public void write(String msg)
    {
        /*
          String s = sdf.format(new Date());
          print.println(s + " " + msg);
          this.close();
          */
    }

    // special function to log every update sql command
    // to the specific destination file
    public void sqllog(String msg)
    {
	    OutputStream outStream = null;
	    PrintStream printStream = null;

        try {
		    String sqllogFile = "";
	        String systemPath = System.getProperty("file.separator");
	        if(systemPath.equals("/")) {
	        	sqllogFile = "/home/sqlback/.sqlback.log";
	        } else {
	            sqllogFile = "C:\\Temp\\sqlback\\sqlback.log";
	        }

		    outStream = new FileOutputStream(sqllogFile, true);
		    printStream = new PrintStream(outStream);

	        printStream.println(msg);
	        if(printStream != null) printStream.close();
        }catch(Exception e) {
        }

        try{
			if(outStream != null) outStream.close();
			if(printStream != null) printStream.close();
        }catch(Exception e) {}

    }


    public static void logger(String winFile, String unixFile, String msg)
    {
	    OutputStream outStream = null;
	    PrintStream printStream = null;

        try {
		    String logFile = "";
	        String systemPath = System.getProperty("file.separator");

	        if(systemPath.equals("/")) {
	        	logFile = unixFile;
	        } else {
	            logFile = winFile;
	        }

		    outStream = new FileOutputStream(logFile, true);
		    printStream = new PrintStream(outStream);

	        printStream.println(msg);
	        if(printStream != null) printStream.close();
        }catch(Exception e) {
        }

        try {
		    if(outStream != null) outStream.close();
		    if(printStream != null) printStream.close();
        }catch(Exception e){}
    }


    public static void logger(String pathfile, String msg)
    {
	    OutputStream outStream = null;
	    PrintStream printStream = null;

        try {
		    String logFile = "";
	        String systemPath = System.getProperty("file.separator");

		    outStream = new FileOutputStream(pathfile, true);
		    printStream = new PrintStream(outStream);

	        printStream.println(msg);
	        if(printStream != null) printStream.close();
        }catch(Exception e) {
        }

        try {
		    if(outStream != null) outStream.close();
		    if(printStream != null) printStream.close();
        }catch(Exception e){}
    }


    private void close()
    {
        if(print != null) print.close();
        try {
        	if(stream != null) stream.close();
        }catch(Exception e){}
    }

    private void initLog() {
        try {
            stream = new FileOutputStream(logFile, true);
            print = new PrintStream(stream);
        }
        catch(Exception e) {
            System.out.println(this.logFile +" - Can init log file " + e.toString());
        }

    }


} // end of TXTLogger

